<!DOCTYPE html>
<html>
  
    <header>
        <% include ../views/partials/header %>
    </header>
  <body>
    <h1> Welcome to Gear Tracker </h1>
    <p>A mobile/tablet/laptop-friendly app that will track all your gear for every gig.</p>
    <ul>
    	<li>Create an account.</li>
    	<li>Create a gear list.</li>
    	<li>Add you tour dates and venue details.</li>
    </ul><br>
    <p>We created a fully responsive inventory tracking app. </p>
    <p>You can monitor the date/time your gear is checked into the venue location and when it is loaded back on the truck. </p>
    <p>You can also note the condition of the equipment at any time.</p>	

   

	<div class="col-md-6">
    	<% if (user) { %>
    		<p>You are currently logged in as <%= user.username %></p>
    		

			<% instruments.forEach( function( instrument ) { %>
    			<h6 class="globalList"><%= instrument.type %> <%= instrument.model %> <button class="add">add to user list</button></h6>
    		<% }); %>
  </div>

    <div class="col-md-6">
		<h4>My personal list</h4>
		<ul id="my-list">
		</ul>
		<button class="finalize">Submit List</button>

		<br>
		<span class="show_array"></span>
<% } %>
    </div>


   <script src='http://code.jquery.com/jquery.js'></script>
   <script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js'></script>

   <script>
	   $(function() {
			$(document).on('click', '.add', function() {
				$(this).parent().removeClass("globalList").addClass("personalList");
	        	$(this).parent().appendTo("#my-list");
	        	$(this).remove();
	    	});
	    });
   </script>

	<script>
		$(function() {
			$('.finalize').on('click', function() {
   				//declare an array
				var myGearList = new Array();

				$('.personalList').each(function(){
					var splititup =  
		   			myGearList.push($(this).text());
		   		});

		   		$.ajax({
				  type: 'POST',
				  url: "/usercreationlist",
				  data: myGearList,
				  success: function(i){
				  	console.log(myGearList);
				  	$('#i').html(i);
				  }
				});



		   		for (var i = 0; i < myGearList.length; i++) {
    				$(".show_array").append('<span>' + myGearList[i] + ', ' + '</span>');
				};
			});
		});
	</script> 

  </body>
</html>